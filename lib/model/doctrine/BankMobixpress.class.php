<?php

/**
 * BankMobixpress
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    sf_sandbox
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class BankMobixpress extends BaseBankMobixpress
{

    const STAT_NEW = 1;
    const STAT_PROCESS = 2;
    const STAT_SUCCESS = 3;
    const STAT_FAILED_CHARGE = 4;
    const STAT_FAILED_OUTCOME = 5;
    const STAT_FAILED_DEALER = 6;
    const STAT_FAILED = 7;
    const STAT_FAILED_MAX_AMOUNT = 8;
    const STAT_FAILED_DUPLICATE_AMOUNT = 9;
    const STAT_FAILED_MIN_AMOUNT = 10;
    const STAT_WAIT_TEMP = 11;
    const STAT_BLOCK_DEALER = 12;
    const STAT_TRANS_VALUE_WRONG = 13;
    const MAX_TRY_COUNT = 3;
    const MAX_AMOUNT_LIMIT = 99999999;
    const MIN_AMOUNT_LIMIT = 28800;

    public function canReCharge()
    {
        if (in_array($this->status, array(
                    BankMobixpressTable::STAT_FAILED,
                    BankMobixpressTable::STAT_PROCESS,
                    BankMobixpressTable::STAT_FAILED_CHARGE,
                    BankMobixpressTable::STAT_FAILED_DEALER)) &&
                $this->try_count < BankMobixpressTable::MAX_TRY_COUNT) {
            return TRUE;
        }

        return FALSE;
    }

}
